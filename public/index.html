<!DOCTYPE html>
<html ng-app="autour">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <title>Autour</title>
        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.0.7/angular-material.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Oswald'>
        <link rel="stylesheet" href="/stylesheets/style.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.0/css/bootstrap-datepicker.css" />
    </head>
    <body ng-controller="mainController as ctrl">
        
        <nav class="nav-wrapper">
            <div class="container">
                <a href="/" class="navbar-brand">autour</a>
                <a href="#" class="navbar-right">LOGIN WITH FACEBOOK</a>
            </div>
        </nav>
        
        <div id="main" class="container" ng-cloak>
            <div class="row">
                <h1>{{ header }}</h1>
            </div>
            <form id="form" ng-submit="$event.preventDefault()" autocomplete='off' class="col-md-offset-4 col-md-4">
                <fieldset class="form-group">
                    <md-autocomplete flex required 
                        md-input-name="origin" 
                        md-input-minlength="3" 
                        md-input-maxlength="18" 
                        md-no-cache="ctrl.noCache" 
                        md-selected-item="ctrl.selectedItem" 
                        md-search-text="ctrl.searchText" 
                        md-items="item in ctrl.querySearch(ctrl.searchText)" 
                        md-selected-item-change="ctrl.selectedItemChange(item)"
                        md-item-text="item.name + ' (' + item.code + ')'" 
                        md-floating-label="FLYING FROM"
                        ng-model="info.origin">
                        
                        <md-item-template>
                            <span md-highlight-text="ctrl.searchText">{{ item.name }} ({{ item.code }})</span>
                        </md-item-template>
                        <!--<div ng-messages="searchForm.autocompleteField.$error" ng-if="searchForm.autocompleteField.$touched">
                            <div ng-message="required">You <b>must</b> have a favorite state.</div>
                            <div ng-message="minlength">Your entry is not long enough.</div>
                            <div ng-message="maxlength">Your entry is too long.</div>
                        </div>
                        -->
                    </md-autocomplete>
                </fieldset>
                <fieldset class="form-group">
                    <md-input-container flex>
                        <label>DEPARTURE DATE</label><span class="glyphicon glyphicon-calendar"></span>
                        <input type="text" ng-model="info.departuredate" id="departDate" class="input-field datepicker">
                    </md-input-container>
                </fieldset>
                <fieldset class="form-group">
                    <md-input-container flex>
                        <label>RETURN DATE</label><span class="glyphicon glyphicon-calendar"></span>
                        <input type="text" ng-model="info.returndate" id="returnDate" class="input-field datepicker">
                        <!--<span class="glyphicon glyphicon-calendar"></span>-->
                    </md-input-container>
                </fieldset>
                <fieldset class="form-group">
                    <md-input-container flex>
                        <label>BUDGET (USD)</label>
                        <input ng-model="info.maxfare" id="budget" class="input-field">
                    </md-input-container>
                </fieldset>
                <button ng-click="submit()" id="searchBtn">SEARCH</button>
            </form>
        </div>
        
        <div id="results" class="container">
            <div ng-show="results.status">
                <h2>Cities you can fly to:</h2>
                
                <table class="table">
                    <thead>
                        <tr>
                            <th>Destination</th>
                            <th>Flight Fare (USD)</th>
                        </tr>
                    </thead>
                    <tbody>
                            <tr ng-repeat="d in fareinfo | orderBy: 'LowestFare'">
                                <td>{{ d.DestinationLocation }}</td>
                                <td>{{ (d.LowestFare).toFixed(2) }}</td>
                            </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!--{"OriginLocation":"NYC","FareInfo":[{"CurrencyCode":"USD","LowestNonStopFare":136.2,"LowestFare":136.2,"DestinationLocation":"BUF","DepartureDateTime":"2015-05-25T00:00:00","ReturnDateTime":"2015-05-30T00:00:00","Links":[{"rel":"shop","href":"https://api.test.sabre.com/v1/shop/flights?origin=NYC&destination=BUF&departuredate=2015-05-25&returndate=2015-05-30&pointofsalecountry=US"}]}]-->
        <!--<div ng-view></div>-->
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.0/js/bootstrap-datepicker.js"></script>
        
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-route.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-animate.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-aria.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-messages.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.0.7/angular-material.min.js"></script>
        <script src="/app.js"></script>
        <script>
            $(function() {
                $('#departDate').datepicker({
                    autoclose: true,
                    startDate: new Date(),
                    format: 'yyyy-mm-dd',
                    orientation: "bottom right"
                }).on('changeDate', function(e) {
                    $('#returnDate').datepicker({ 
                        autoclose: true,
                        format: 'yyyy-mm-dd',
                        orientation: "bottom right"
                    })
                    .datepicker('setStartDate', e.date)
                    .focus();
                });
                
                $('#returnDate').datepicker({ 
                    autoclose: true,
                    startDate: new Date(),
                    format: 'yyyy-mm-dd',
                    orientation: "bottom right"
                });
            });
        </script>
    </body>
</html>
